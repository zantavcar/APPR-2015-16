---
title: "Poročilo pri predmetu Analiza podatkov s programom R"
author: "Žan Tavčar"
output:
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
  html_document: default
  word_document: default
---

```{r setup, echo=FALSE, results='hide', message=FALSE,warning=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#
#source("fontconfig.r", encoding = "UTF-8")

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding = "UTF-8")
```

# Izbira teme

Analiziral bom prošnje za azil v letošnjem letu v državah EU, skušal bom ugotoviti, kje je kriza največja, kako se spreminja politika sprejema prošenj za azil, predvsem pa se bom osredotočil na sestavo migrantske populacije.

***

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz, echo=FALSE,message=FALSE,warning=FALSE}
source("uvoz/uvoz.r", encoding = "UTF-8")
```

Podatke sem črpal iz Eurostata za tabele o številu prošenj za azil, odločitvah, spolu azilantov, njihovi starosti ter državljanstvu. Podatki sem pretvoril v pregledno tidy data obliko. Spremenljivke za vsako tabelo so opisane spodaj. Drugi vir je bil Wikipedia, kjer sem uvažal iz strani *"https://en.wikipedia.org/wiki/Area_and_population_of_European_countries"* z namenom informacije o številu prebivalcev evropskih držav, kar mi je koristilo pri kasnejši analizi.


Tabela *tidy_Prosnje2015* je sestavljena iz naslednjih stolpcev:

* **TIME** - določa čas, npr. *2015M02* določa drugi mesec v letu 2015.
* **GEO** - država v kateri azilanti zaprosijo za azil
* **ASYL_APP** - določa število vseh prosilcev in tistih, ki za azil prosijo prvič
* **VALUE** - število prošenj

Primer uvožene tabele *tidy_Prosnje2015*.

```{r,echo=FALSE,message=FALSE}
kable(objava_Prosnje)
```

Podobno so urejene tudi ostale tabele, le da je v ostalih tabelah namesto stolpca ASYL_APP naslednja reč:

* v tabeli *tidy_Odlocitve* stolpec **DECISION** določa tip odločitve prošnje za azil
* v tabeli *tidy_Spol* stolpec **SEX** določa spol azilantov
* v tabeli *tidy_Origin* stolpec **ORIGIN** določa od kje azilantje prihajajo
* v tabeli *tidy_Starost* stolpec **AGE** določa starost azilantov, razdeljeni so v štiri starostne kategorije

## Vizualizacija podaktov

Iz tabele *tidy_Prosnje2015* sem naredil novo razpredelnico, in sicer sem za vsako evropsko državo izračunal število prošenj v prvem, drugem in tretjem četrtletju, izračunal sem prirast glede na prejšnje četrtletje (npr. stolpec **Q2.Q1(%)** določa priprast v drugem četrtletju, če za bazo vzamemo prvo četrtletje, prirast je izražen v procentih)

```{r,echo=FALSE,message=FALSE}
kable(tabela1)
```

Prav tako sem s tabele *tidy_Prosnje2015* ustvaril graf, ki prikazuje dinamiko prošenj za azil nekaterih nabolj obleganih evropskih držav skozi leto 2015.


```{r,echo=FALSE,message=FALSE,warning=FALSE}
print(graf_prosnje)
```

Menil sem, da absolutna vrednost števila prošenj za azil ne prikaže realnega stanja, zato sem s pomočjo tabele *population*, ki sem jo pobral z URL vira navedenega v uvodu, izračunal število prošenj za azil na milijon prebivalstva in rezultate prikazal na zemljevidu.

```{r,echo=FALSE,message=FALSE,warning=FALSE}
print(map1)
```




